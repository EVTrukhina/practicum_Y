## Задача

Спроектировать и задокументировать API в Swagger для новой фичи на основе анализа архитектуры (C4) и макета.

## Процесс работы

### Архитектура приложения и модель С4

Проведен анализ [расшифровки встречи с архитектором](https://docs.google.com/document/d/1E1FYjQ4kXn_VuqZVjIv0X3Ml3IWQyWHXB57RJsv5UsM/edit?usp=sharing). На основании анализа доработана контекстная диаграмма C4, описывающая архитектуру приложения LUCKY.

Дополнения к диаграмме:

*   **Описания компонентов:** Добавлены описания каждого ключевого компонента (Mobile App, API Gateway, Load Balancer, AuthServer, Shopping Cart, Payment, Shipping, внешние системы Система PAY-PAY, Система SHIP-SHIP, и др.), что позволяет понять их назначение в системе.
*   **Протоколы взаимодействия:** Указаны протоколы взаимодействия между компонентами (REST, TCP, SFTP, QUERY), что облегчает понимание потоков данных и связности системы.


![Обновленная диаграмма UML](https://github.com/EVTrukhina/practicum_Y/blob/main/Модель%20С4%20диаграмма%20для%20LUCKY.png)
<p align="center">Рис 1. Модель С4 </p>

<details>
  <summary><b>Основные элементы </b></summary>

  **Mobile App:**
  *   Назначение: Обеспечивает взаимодействие пользователя с сервисом LUCKY.
  *   Связи: REST с API Gateway.

  **API Gateway:**
  *   Назначение: Централизованная точка входа для взаимодействия клиента и сервисов.
  *   Связи: REST с Mobile App, REST с Load Balancer, QUERY с Service Registry.

  **Load Balancer:**
  *   Назначение: Определяет нагрузку экземпляров сервисов и равномерно распределяет запросы.
  *   Связи: REST с API Gateway, QUERY с Service Registry, TCP с Kafka, REST с User, REST с Films, REST с Store, REST с Shopping cart, REST с Payment, REST с Shipping, REST с Insurance.

  **AuthServer:**
  *   Назначение: Осуществляет авторизацию пользователей в сервисе LUCKY.
  *   Связи: REST с Load Balancer.

  **Service Registry:**
  *   Назначение: Осуществляет проверку адреса инстанса.
  *   Связи: QUERY с Load Balancer (пунктирные линии).

  **User:**
  *   Назначение: Хранит и управляет информацией о пользователях.
  *   Технология: MySQL, Redis.
  *   Связи: REST с Load Balancer, TCP/IP c MySQL.

  **Films:**
  *   Назначение: Осуществляет показ фильмов.
  *   Связи: REST с Load Balancer, TCP/IP с MySQL, SSH с Amazon S3.

  **Store:**
  *   Назначение: Сервис интернет-магазина, осуществляет показ товаров.
  *   Связи: REST с Load Balancer, TCP/IP с MySQL.

  **Insurance:**
  *   Назначение: Осуществляет страхование животных.
  *   Связи: REST с Load Balancer, к MongoDB.

  **Shopping cart:**
  *   Назначение: Осуществляет создание корзины при добавлении товара, корректировку состава корзины и оформление заказа.
  *   Связи: REST с Load Balancer, TCP/IP с MySQL, TCP c Kafka.

  **Payment:**
  *   Назначение: Отвечает за оплату товаров в корзине.
  *   Связи: REST с Load Balancer, SFTP с RabbitMQ.

  **Shipping:**
  *   Назначение: Отвечает за оформление доставки.
  *   Связи: REST с Load Balancer, SFTP с RabbitMQ.

  **Kafka:**
  *   Назначение: Обеспечивает обмен сообщениями между сервисами.
  *   Технология: Kafka.
  *   Связи: TCP с Load Balancer, TCP с Shopping Cart.

  **CRM:**
  *   Назначение: Осуществляет отслеживание и управление заказами.

 **Другие компоненты**
  * RabbitMQ:** Брокер сообщений

  * MySQL:** Хранит информацию о пользователях, описание контента, данные о товарах

  * Amazon S3:** хранит медиа-файлы

  * ElasticSearch:** осуществляет полнотекстовый поиск

  * MongoDB:** Хранит описание страховок

  * Система PAY-PAY:** Внешняя система для проведения платежей

  * Система SHIP-SHIP:** Внешняя система которая обрабатывает заказы на доставку

  **Внешние системы:**
  *   Система PAY-PAY: Внешняя система для проведения платежей. Связь SFTP через RabbitMQ с Payment.
  *   Система SHIP-SHIP: Внешняя система, которая обрабатывает заказы на доставку. Связь SFTP через RabbitMQ с Shipping.
  *   Amazon S3: Хранит медиа-файлы
  *   CRM: Осуществляет отслеживание и управление заказами.

  **Типы взаимодействий (протоколы):**
  *   REST: Для синхронного взаимодействия между компонентами (Mobile App, API Gateway, Load Balancer, микросервисы).
  *   TCP: Для взаимодействия с Kafka (асинхронный обмен сообщениями).
  *   SFTP: Для взаимодействия с внешними системами через RabbitMQ (вероятно, для передачи файлов).
  *   QUERY: Запрос в Service Registry
  *   SSH: с Amazon S3
  *   TCP/IP: к базам данных
</details>
